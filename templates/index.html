<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Carteirinha Virtual</title>
</head>
<body>
    <h2>Gerador de Carteirinha Virtual</h2>

    <form method="POST" enctype="multipart/form-data">
        <label for="atleta">Atleta:</label><br>
        <input type="text" id="atleta" name="atleta" value="{{ atleta or '' }}" required><br><br>

        <label for="cidade">Cidade:</label><br>
        <input type="text" id="cidade" name="cidade" value="{{ cidade or '' }}" required><br><br>

        <label for="pico">Pico:</label><br>
        <input type="text" id="pico" name="pico" value="{{ pico or '' }}" required><br><br>

        <label for="categoria">Categoria:</label><br>
        <input type="text" id="categoria" name="categoria" value="{{ categoria or '' }}" required><br><br>

        <label for="cor">Cor do texto:</label><br>
        <input type="color" id="cor" name="cor" value="{{ cor or '#ffffff' }}"><br><br>

        <label for="imagem">Imagem do cartão (proporção 856 x 540):</label><br>
        <input type="file" id="imagem" name="imagem" accept="image/*"><br><br>

        {% if image_original %}
            <input type="hidden" name="imagem_original" value="{{ image_original }}">
        {% endif %}

        <button type="submit" name="acao" value="preview">👁 Visualizar</button>
        <button type="submit" name="acao" value="salvar">📥 Baixar Carteirinha</button>
    </form>

    {% if erro %}
        <p style="color: red;">{{ erro }}</p>
    {% endif %}

    {% if image_url %}
        <hr>
        <h3>Carteirinha Gerada:</h3>
        <img src="{{ image_url }}" alt="Carteirinha gerada" style="max-width:100%; height:auto; border:1px solid #ccc; padding:10px;">
        <br><br>
        {% if download %}
            <a href="{{ image_url }}" download>📥 Clique aqui para baixar sua carteirinha</a>
        {% endif %}
    {% endif %}
</body>
</html>
